<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="seismic-time-plot.html">

<dom-module id="seismic-wide-view">
  <template>
    <style>
     #cursor {
       position: relative;
       user-select: none;
       -webkit-user-select: none;
     }
     #vline {
       border-left: 2px solid #50E3C2;
       height: 100px;
     }
     #ball {
       background-color: #50E3C2;
       display: inline-block;
       border-radius: 50%;
       width: 34px;
       height: 34px;
       color: white;
       font-size: 18px;
       display: flex;
       align-items: baseline;
       box-shadow: 0 7px 9px rgba(0, 0, 0, 0.29);
       justify-content: center;
       position: relative;
       left: -16px;
     }
     #focused {
       background: #3B4147;
     }
    </style>
    <div id="focused"></div>
    <seismic-time-plot id="plot"></seismic-time-plot>
    <div id="cursor">
      <div id="vline"></div>
      <div id="ball">◂ ▸</div>
    </div>
  </template>
  <script>
   Polymer({
     is: "seismic-wide-view",
     properties: {
       cursorTime: { type: Number, notify: true, reflectToAttribute: true }
     },
     listeners: {
       'track': 'handleTrack'
     },
     handleTrack: function(e) {
       if (e.detail.state === 'track') {
         this.$.cursor.style.left = e.detail.x + 'px';
         this.cursorTime = this.graphTimeAt(e.detail.x);
       }
     },
     graphTimeAt: function(x) {
       return this.$.plot.graph.x.invert(x);
     },
     xAtGraphTime: function(t) {
       return this.$.plot.graph.x(t);
       },
     ready: function() {
       this.handleTrack({detail: {state: 'track',
                                  x: this.xAtGraphTime(40000000)}});
     }
   });
  </script>
</dom-module>


